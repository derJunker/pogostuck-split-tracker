<!DOCTYPE html>
<html lang="en">
    <head>
    </head>
    <body>
        <div id="menu-bar">
            <button id="setup-guide-btn" class="active menu-btn">
                <span lang="en" style="display: none">Setup</span>
                <span lang="ja" style="display: none">セットアップガイド</span>
            </button>
            <button id="preferences-btn" class="menu-btn">
                <span lang="en" style="display: none">Preferences</span>
                <span lang="ja" style="display: none">設定</span>
            </button>
            <button id="splits-btn" class="menu-btn">
                <span lang="en" style="display: none">Splits</span>
                <span lang="ja" style="display: none">スプリット</span>
            </button>
            <button id="pbs-btn" class="menu-btn">
                <span lang="en" style="display: none">PBs</span>
                <span lang="ja" style="display: none">PBs</span>
            </button>
            <button id="paths-btn" class="menu-btn">
                <span lang="en" style="display: none">Paths</span>
                <span lang="ja" style="display: none">パス</span>
            </button>
        </div>
        <div id="menu-content">
            <div id="setup-guide-content" class="menu-content">
                <div class="setup-text" lang="en" style="display: none">
                    Hi! Ty for using my Program :)<br>
                    <br>
                    <p class="only-fs" style="display: none">
                        Seems like you are using fullscreen. Sadly the overlay does not work with
                        fullscreen - only windowed or borderless☹️. You can still use the program to track your gold splits etc, or move the overlay to a 2nd monitor. But sadly there is no way of putting it on top of the game.<br><br></p>
                    Before you can use the splits-program, you need to set up a few things.<br>
                    <br>
                    <ul>
                        <li>
                            <b>Add Steam Launch Option:</b> You need to add "-diag" as a launch option to your Pogostuck
                            Steam launch configuration. This is needed so the game writes the logs that this
                            program reads for split detection, etc..
                            <br>
                            <i>To do this, right-click on Pogostuck in your Steam Library, go to Properties, then
                                Launch Options and add "-diag" (without quotes) to the text field.</i>
                            <br>
                            <b>Alternatively:</b> Launch Pogostuck with the "Launch Pogostuck" button in this program. This will launch Pogostuck with the mentioned launch option

                        </li>
                        <li>
                            <b>Launch Pogostuck:</b> Launch Pogostuck (either with the button here, or via Steam). It will try to find the path to your Pogostuck installation and your userdata path.
                            However, this does not always work, especially if you have Pogostuck installed on a different drive than Steam.
                            Check the <a data-tab-link="paths">Paths</a> tab to see if the paths are correct, or it should give you feedback in the overlay if anything is wrong.
                            If one or both paths are not filled out OR you have multiple steam accounts with
                                                     pogostuck owned, you need to follow the next two steps.
                        </li>
                        <li>
                            <b>Steam Userdata Path:</b> You need to input your Steam userdata path (in the <a data-tab-link="paths">Paths</a>
                            tab). It is used to read your <code>Settings.txt</code>, so it can read your current pb split times.
                            <br>
                            Most likely it will be something similar to this:<br>
                            <code>C:\Program Files (x86)\Steam\userdata\$steam-friend-code</code>
                        </li>
                        <li>
                            <b>Pogo Path:</b> You need to input your Pogostuck path (in the <a data-tab-link="paths">Paths</a> tab as well). It is needed
                            for basically everything. In there the before mentioned logs are put.
                            <br>
                            <i>It should be looking similar to this: <br>
                                <code>C:\Program Files (x86)\Steam\steamapps\common\Pogostuck</code></i> <br>
                            You can also this path when you go to the Pogostuck steam library page, click on the settings wheel -> manage -> browse local files.
                        </li>
                        <li>
                            <b>Adjust Speedrun splits ingame:</b> In pogostuck Options -> Misc -> Show speedrun splits ->
                            set it to "Minimal", "Off" wont work
                        </li>
                        <li>
                            <b>Enter Pbs:</b> Currently i dont have a way to automatically detect your Pbs.
                            So you have to enter it manually. So you need to do that under the <a data-tab-link="pbs">Pbs</a> tab.
                        </li>
                        <li>
                            <b>Enter Split Skips:</b> If you skip any full splits (e.g. palms skip, mushroom skip or in extra modes like puzzle & double jump),
                            you need to enter them in the <a data-tab-link="splits">Splits</a> tab. Otherwise the sum-of-best-splits cannot be calculated properly.
                        </li>
                        <li class="only-win11" style="display: none">
                            <b>Windows 11 Users:</b> If you are using Windows 11 and have window shadow enabled, you can choose to disable it in these <a class="open-settings-link">settings</a>.
                            <br>
                        </li>
                    </ul>
                    <h3>Preference Configuration Suggestions</h3>
                    <ul>
                        <li class="only-fs" style="display: none"><b>If you play fullscreen</b>, you cannot use the split overlay. However you can have it on a second monitor or running in the background. <br>
                            If you choose to have it on a second monitor, you should set "Enable background color" to true, and then set your background color.</li>
                        <li>
                            <b>If you play borderless</b>, after resizing and dragging the overlay to the desired position set "Overlay is not clickable" to true, this way you will able to click stuff behind the overlay.
                        </li>
                        <li>
                            <b>If you stream</b> and want to use this overlay. Set "Hide overlay when Pogostuck not active" to false, so the overlay does not disappear when you tab out.
                        </li>
                        <li>
                            To reduce the amount of programs you need to open, set the "Launch Pogostuck on startup" to true, so you can just open this program and it will launch Pogostuck for you.
                        </li>
                    </ul>
                    Thats it :D. I hope you have fun. If you find any bugs or have any other feedback you can dm me on
                    discord (@derjunker)👍.
                </div>
                <div class="setup-text" lang="ja" style="display: none">
                    <p>こんにちは！このプログラムをご利用いただきありがとうございます :)</p>
                    <br>
                    <p class="only-fs" style="display: none">
                        フルスクリーンモードをご利用中のようです。残念ながら、スプリットのオーバーレイはウィンドウモードまたはボーダーレスモードのみ対応しています☹️。区間PBの記録などは問題なく作動しますが、フルスクリーンモードでオーバーレイを利用するためにはオーバーレイをサブモニターに移動する必要があります。ゲーム上に直接表示させる方法はありません。<br><br>
                    </p>
                    <p>スプリットプログラムを使用する前に、幾つかの設定が必要です。<br><br></p>
                    <ul>
                        <li>
                            <b>Steam起動オプションを追加：</b> PogostuckのSteam起動オプションに「-diag」を追加してください。このオプションにより、ゲームがログファイルを作成し、プログラムがスプリットを探知することが可能になります。<br>
                            <i>方法：SteamのライブラリでPogostuckを右クリック → 「プロパティ」 → 「起動オプション」に「-diag」（引用符なし）を追加</i><br>
                            <b>対案：</b> スプリットプログラムの「Launch Pogostuck」ボタンからPogostuckを起動してください。自動的に起動オプション付きでゲームが起動されます。
                        </li>
                        <li>
                            <b>Pogostuckを起動：</b> Pogostuckを起動してください。（ここのボタンまたは Steam経由）インストール経路とuserdata経路の自動検出を行います。<br>
                                                    PogostuckがSteamと別のドライブにインストールされている場合などは経路の検出に失敗することがあります。<br>
                            <a data-tab-link="paths">パス</a>タブで経路が正しいか確認してください。問題がある場合はスプリットのオーバーレイにフィードバックが表示されます。<br>
                                                    どちらかの経路が未設定の場合、または複数のSteamアカウントでPogostuckを所有している場合は、次の2つの手順に従ってください。
                        </li>
                        <li>
                            <b>Steam Userdata Path：</b> <a data-tab-link="paths">パス</a> タブでSteamのuserdata経路を入力してください。これは<code>Settings.txt</code>からPBのスプリットを読み込むために必要です。<br>
                                                                                           一般的には以次のような経路になります：<br>
                            <code>C:\Program Files (x86)\Steam\userdata\$steam-friend-code</code>
                        </li>
                        <li>
                            <b>Pogo Path：</b> 同様に<a data-tab-link="paths">パス</a>タブでPogostuckのインストール経路を入力してください。これはスプリットプログラムの作動に必修です。この経路にゲームのログファイルが出力されます。<br>
                            <i>一般的には以下のような経路になります：<br>
                                <code>C:\Program Files (x86)\Steam\steamapps\common\Pogostuck</code></i><br>
                                              PogostuckのSteamライブラリでPogostuckを右クリック → 「管理」 → 「ローカルファイルを参照」 → 経路をコピー
                        </li>
                        <li>
                            <b>ゲーム内でスプリットを調整:</b> Pogostuckの「オプション」 → 「その他」 → 「タイムアタックのスプリットを表示」を「プラスマイナスのみ」に設定してください。「オフ」では動作しません。
                        </li>
                        <li>
                            <b>PBを入力:</b> 現時点ではPBの自動探知は対応していません。<a data-tab-link="pbs">Pbs</a>タブで手動で入力してください。
                        </li>
                        <li>
                            <b>スプリットスキップを入力：</b> パルムスキップ、きのこスキップ、またはパズルやダブルジャンプのモードでのスキップなどをする場合、<a data-tab-link="splits">スプリット</a>タブにスキップを入力してください。入力されないと、区間PB合計が正しく計算されません。
                        </li>
                        <li class="only-win11" style="display: none">
                            <b>Windows 11を利用してる方へ：</b> Windows 11でウィンドウの下の影が表示になっている場合は、<a class="open-settings-link">設定</a>から非表示に変えれます。<br>
                        </li>
                    </ul>
                    <h3>おすすめの設定</h3>
                    <ul>
                        <li class="only-fs" style="display: none">
                            <b>フルスクリーンモードでプレイする場合</b>、スプリットのオーバーレイは基本使用できません。サブモニターやゲーム裏で表示させることは可能です。<br>
                                                                       サブモニターで使用する場合は、「Enable background color」を「true」に設定し、背景色を指定するのがおすすめです。
                        </li>
                        <li>
                            <b>ボーダーレスモードでプレイする場合</b>、スプリットのオーバーレイのサイズと位置の調整をした後、「Overlay is not clickable」を「true」に設定してください。これによってオーバーレイ越しにクリックすることが可能になります。
                        </li>
                        <li>
                            <b>配信をしてる場合</b>、オーバーレイを配信に移したいなら「Hide overlay when Pogostuck not active」を「false」に設定してください。これによってPogostuckが非アクティブになってもオーバーレイは消えません。
                        </li>
                        <li>
                            起動するプログラムの数を減らしたい場合は、「Launch Pogostuck on startup」を「true」に設定すると、このプログラムを起動するだけでPogostuckも自動的に起動されます。
                        </li>
                    </ul>

                    <p>以上となります :D楽しんでもらえたら嬉しいです。バグ報告やフィードバックがあればDiscordの@derjunkerにDMをおくってください。👍</p>

                </div>
            </div>
            <div id="preferences-content" class="menu-content">
                <div class="toggle-switch">
                    <label for="only-colored-diff"
                           class="toggle-label">
                        <span lang="en" style="display: none">Only color the time difference</span>
                        <span lang="ja" style="display: none">スプリットの差分だけ色表示</span>:</label>
                    <input type="checkbox" id="only-colored-diff" class="toggle-checkbox">
                    <button id="only-colored-diff-custom" class="custom-checkbox"></button>
                </div>
                <div class="toggle-switch">
                    <label for="race-gold-splits"
                           class="toggle-label">
                        <span lang="en" style="display: none">Compare Run to Gold Splits</span>
                        <span lang="ja" style="display: none">ベストスプリットと比較</span>:
                    </label>
                    <input type="checkbox" id="race-gold-splits" class="toggle-checkbox">
                    <button id="race-gold-splits-custom" class="custom-checkbox"></button>
                </div>
                <div class="toggle-switch">
                    <label for="ignore-skipped-splits" class="toggle-label">
                        <span  lang="en" style="display: none">Hide skipped splits</span>
                        <span lang="ja" style="display: none">スキップしたスプリットを非表示</span>:
                    </label>
                    <input type="checkbox" id="ignore-skipped-splits" class="toggle-checkbox">
                    <button id="ignore-skipped-splits-custom" class="custom-checkbox"></button>
                </div>
                <div>
                    <label for="split-naming-select">
                        <span lang="en" style="display: none">Split Names</span>
                        <span lang="ja" style="display: none">スプリット名</span>:
                    </label>
                    <div class="dropdown-container">
                        <select id="split-naming-select" class="dropdown">
                            <option value="new">New</option>
                            <option value="old">Old</option>
                        </select>
                        <span class="dropdown-arrow">
                        <img src="assets/dropdown-arrow.svg" alt="Dropdown Arrow"/>
                    </span>
                    </div>
                </div>
                <div class="toggle-switch">
                    <label for="click-through-overlay" class="toggle-label">
                        <span lang="en" style="display: none">Overlay is not clickable</span>
                        <span lang="ja" style="display: none">オーバーレイをクリック不可</span>:
                    </label>
                    <input type="checkbox" id="click-through-overlay" class="toggle-checkbox">
                    <button id="click-through-overlay-custom" class="custom-checkbox"></button>
                </div>
                <div class="toggle-switch">
                    <label for="hide-when-pogo-not-active" class="toggle-label">
                        <span lang="en" style="display: none">Hide overlay when Pogostuck not active</span>
                        <span lang="ja" style="display: none">Pogostuckが非アクティブの時オーバーレイを非表示</span>:
                    </label>
                    <input type="checkbox" id="hide-when-pogo-not-active" class="toggle-checkbox">
                    <button id="hide-when-pogo-not-active-custom" class="custom-checkbox"></button>
                </div>

                <div class="toggle-switch">
                    <label for="enable-background-color" class="toggle-label">
                        <span lang="en" style="display: none">Enable background color</span>
                        <span lang="ja" style="display: none">背景色を有効化</span>:
                    </label>
                    <input type="checkbox" id="enable-background-color" class="toggle-checkbox">
                    <button id="enable-background-color-custom" class="custom-checkbox"></button>
                </div>
                <div>
                    <label for="set-background-color" class="input-label">
                        <span lang="en" style="display: none">Set background color</span>
                        <span lang="ja" style="display: none">背景色を設定</span>:
                    </label>
                    <input type="color" id="set-background-color" value="#000000">
                </div>
                <div class="toggle-switch">
                    <label for="launch-pogo-on-startup" class="toggle-label">
                        <span lang="en" style="display: none">Launch Pogostuck on startup</span>
                        <span lang="ja" style="display: none">起動時にPogostuckを起動</span>:
                    </label>
                    <input type="checkbox" id="launch-pogo-on-startup" class="toggle-checkbox">
                    <button id="launch-pogo-on-startup-custom" class="custom-checkbox"></button>
                </div>
            </div>
            <div id="splits-content" class="menu-content">
                <div id="map-n-mode-selection">
                    <div class="dropdown-container">
                        <label for="map-select">Map: </label>
                        <select id="map-select" class="dropdown">
                        </select>
                        <span class="dropdown-arrow">
                        <img src="assets/dropdown-arrow.svg" alt="Dropdown Arrow"/>
                    </span>
                    </div>
                    <div class="dropdown-container">
                        <label for="mode-select">Mode: </label>
                        <select id="mode-select" class="dropdown">
                            <option value="new">Regular</option>
                            <option value="old">Skipless</option>
                        </select>
                        <span class="dropdown-arrow">
                        <img src="assets/dropdown-arrow.svg" alt="Dropdown Arrow"/>
                    </span>
                    </div>
                </div>
                <div id="skip-selection">
                    <div id="map-n-mode-split-selection">
                    </div>
                    <div id="gold-split-selection">
                        <h3>Gold Splits</h3>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-0-1-input">Bones</label>
                            <input type="text" id="gold-0-1-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-1-2-input">Wind</label>
                            <input type="text" id="gold-1-2-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-2-3-input">Grapes</label>
                            <input type="text" id="gold-2-3-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-3-5-input">Trees</label>
                            <input type="text" id="gold-3-5-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-5-7-input">Palms</label>
                            <input type="text" id="gold-5-7-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-7-8-input">Flowers</label>
                            <input type="text" id="gold-7-8-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-8-9-input">Ice</label>
                            <input type="text" id="gold-8-9-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div>
                            <img src="assets/curved-arrow.svg" alt="curved arrow pointing down"/>
                            <label for="gold-9-10-input">Egg</label>
                            <input type="text" id="gold-9-10-input" class="input-field" placeholder="00:00.000">
                        </div>
                        <div id="final">Finish</div>
                    </div>
                    <div id="gold-pace-selection">
                        <h3>Best Paces</h3>
                        <label for="pace-0-input">Bones</label>
                        <input type="text" id="pace-0-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-1-input">Wind</label>
                        <input type="text" id="pace-1-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-2-input">Grapes</label>
                        <input type="text" id="pace-2-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-3-input">Trees</label>
                        <input type="text" id="pace-3-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-4-input">Pineapples</label>
                        <input type="text" id="pace-4-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-5-input">Palms</label>
                        <input type="text" id="pace-5-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-6-input">Mushrooms</label>
                        <input type="text" id="pace-6-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-7-input">Flowers</label>
                        <input type="text" id="pace-7-input" class="input-field" placeholder="00:00.000">
                        <label for="pace-8-input">Ice</label>
                        <input type="text" id="pace-8-input" class="input-field" placeholder="00:00.000">
                    </div>
                </div>
            </div>
            <div id="pbs-content" class="menu-content">

            </div>
            <div id="paths-content" class="menu-content">
                <div class="text-input-container">
                    <label for="pogo-path-text" class="input-label">
                        <span lang="en" style="display: none">Pogo Path</span>
                        <span lang="ja" style="display: none">Pogostuckのパス</span>:
                    </label>
                    <input type="text" id="pogo-path-text" class="input-field"
                           placeholder="Enter Pogostuck folder...">
                </div>
                <div class="text-input-container">
                    <label for="steam-path-text" class="input-label">
                        <span lang="en" style="display: none">Steam Path</span>
                        <span lang="ja" style="display: none">Steamのパス</span>:
                    </label>
                    <input type="text" id="steam-path-text" class="input-field" placeholder="Enter Steam folder...">
                </div>
                <div class="text-input-container">
                    <label for="steam-friend-code" class="input-label">
                        <span lang="en" style="display: none">TODO jap</span>
                        <span lang="ja" style="display: none">TODO jap; also fix setup guide to use friend code;
                        also use steam.exe to open pogostuck with params correctly :)</span>:
                    </label>
                    <input type="text" id="steam-friend-code" class="input-field"
                           placeholder="Enter Steam Friend-Code...">
                </div>
            </div>
        </div>
        <footer>
            <button id="update-btn" class="inverted" style="display: none">Update!</button>
            <button id="launch-pogo-btn" class="inverted">
                <span lang="en" style="display: none">Launch Pogostuck</span>
                <span lang="ja" style="display: none">Pogostuckを起動</span>
            </button>
            <button id="toggle-lang-btn" class="inverted">日本語 / English</button>
        </footer>
        <div id="new-release-modal" class="modal" style="display:none;">
            <div class="modal-content">
                <span id="close-release-modal" class="close">&times;</span>
                <h2>New Release Available!</h2>
                <div id="release-info-content"></div>
                <div id="release-btns">
                    <a class="button" id="release-download-link">Download Link</a>
                    <button id="release-modal-ok">OK</button>
                </div>
            </div>
        </div>
        <script type="module" src="index.ts"></script>
    </body>

</html>